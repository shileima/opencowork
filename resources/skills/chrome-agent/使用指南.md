# å¾®åšçƒ­æœè‡ªåŠ¨åŒ–æŠ“å–å·¥å…· - ä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

è¿™ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬å¯ä»¥ï¼š
1. âœ… è‡ªåŠ¨æ‰“å¼€å¾®åšç½‘ç«™
2. âœ… ç‚¹å‡»å·¦ä¾§çƒ­æœèœå•
3. âœ… è·å–ä¸­é—´æ çš„çƒ­æœåˆ—è¡¨
4. âœ… ç”Ÿæˆç²¾ç¾çš„ PDF æŠ¥å‘Š
5. âœ… ä¿å­˜ JSON æ ¼å¼æ•°æ®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
./run.sh
```

### æ–¹å¼äºŒï¼šç›´æ¥è¿è¡Œ

```bash
node weibo_hot_search.js
```

### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ npm

```bash
npm start
```

## ğŸ“¦ ç³»ç»Ÿè¦æ±‚

- âœ… Node.js 18+ å·²å®‰è£…
- âœ… Google Chrome æµè§ˆå™¨å·²å®‰è£…
- âœ… å¯ä»¥è®¿é—®å¾®åšç½‘ç«™

## ğŸ“‚ è¾“å‡ºæ–‡ä»¶

è¿è¡ŒæˆåŠŸåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

1. **PDF æ–‡æ¡£**: `å¾®åšçƒ­æœ_2026-01-24.pdf`
   - æ ¼å¼åŒ–çš„çƒ­æœæ¦œå•
   - åŒ…å«æ’åã€æ ‡é¢˜ã€çƒ­åº¦ã€æ ‡ç­¾
   - ç²¾ç¾çš„è¡¨æ ¼æ ·å¼

2. **JSON æ•°æ®**: `å¾®åšçƒ­æœ_2026-01-24.json`
   - åŸå§‹æ•°æ®æ–‡ä»¶
   - ä¾¿äºè¿›ä¸€æ­¥å¤„ç†å’Œåˆ†æ

3. **æˆªå›¾æ–‡ä»¶**: `å¾®åšçƒ­æœæˆªå›¾_2026-01-24.png`ï¼ˆä»…åœ¨æ•°æ®æå–å¤±è´¥æ—¶ç”Ÿæˆï¼‰
   - å®Œæ•´é¡µé¢æˆªå›¾
   - ç”¨äºè°ƒè¯•å’ŒéªŒè¯

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: å®šæ—¶æŠ“å–

ä½¿ç”¨ cron å®šæ—¶ä»»åŠ¡æ¯å°æ—¶æŠ“å–ä¸€æ¬¡ï¼š

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰
0 * * * * cd /Users/shilei/.opencowork/skills/chrome-agent && node weibo_hot_search.js >> cron.log 2>&1
```

### ç¤ºä¾‹ 2: ä½œä¸ºæ¨¡å—ä½¿ç”¨

```javascript
const { getWeiboHotSearch } = require('./weibo_hot_search.js');

async function myCustomTask() {
    try {
        const result = await getWeiboHotSearch();
        console.log('PDF è·¯å¾„:', result.pdfPath);
        console.log('JSON è·¯å¾„:', result.jsonPath);
        console.log('çƒ­æœæ•°é‡:', result.count);
        
        // è¿›è¡Œä½ çš„è‡ªå®šä¹‰å¤„ç†
        // ...
    } catch (error) {
        console.error('é”™è¯¯:', error);
    }
}

myCustomTask();
```

### ç¤ºä¾‹ 3: æ‰¹é‡æŠ“å–å¹¶åˆ†æ

```javascript
const { getWeiboHotSearch } = require('./weibo_hot_search.js');
const fs = require('fs');

async function analyzeHotSearchTrends() {
    const results = [];
    
    // æ¯éš”2å°æ—¶æŠ“å–ä¸€æ¬¡ï¼Œå…±æŠ“å–3æ¬¡
    for (let i = 0; i < 3; i++) {
        const result = await getWeiboHotSearch();
        const data = JSON.parse(fs.readFileSync(result.jsonPath, 'utf-8'));
        results.push({
            timestamp: new Date(),
            data: data
        });
        
        if (i < 2) {
            await new Promise(resolve => setTimeout(resolve, 2 * 60 * 60 * 1000));
        }
    }
    
    // åˆ†æçƒ­æœè¶‹åŠ¿
    console.log('å·²å®Œæˆ3æ¬¡æŠ“å–ï¼Œå¼€å§‹åˆ†æ...');
    // ä½ çš„åˆ†æé€»è¾‘...
}
```

## âš™ï¸ é…ç½®é€‰é¡¹

æ‰“å¼€ `weibo_hot_search.js` å¯ä»¥ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```javascript
// æµè§ˆå™¨é…ç½®
const browser = await puppeteer.launch({
    headless: false,  // æ”¹ä¸º true å¯ç”¨æ— å¤´æ¨¡å¼ï¼ˆä¸æ˜¾ç¤ºæµè§ˆå™¨çª—å£ï¼‰
    executablePath: executablePath,  // Chrome è·¯å¾„
    defaultViewport: {
        width: 1920,   // æµè§ˆå™¨çª—å£å®½åº¦
        height: 1080   // æµè§ˆå™¨çª—å£é«˜åº¦
    }
});

// PDF é…ç½®
await pdfPage.pdf({
    path: pdfPath,
    format: 'A4',     // é¡µé¢å¤§å°ï¼šA4, Letter, Legal ç­‰
    printBackground: true,  // æ‰“å°èƒŒæ™¯è‰²
    margin: {
        top: '20mm',
        right: '15mm',
        bottom: '20mm',
        left: '15mm'
    }
});
```

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ‰¾ä¸åˆ° Chrome æµè§ˆå™¨

**é”™è¯¯ä¿¡æ¯**: `âŒ æœªæ‰¾åˆ° Chrome/Chromium æµè§ˆå™¨`

**è§£å†³æ–¹æ¡ˆ**:
1. å®‰è£… Google Chrome: https://www.google.com/chrome/
2. æˆ–è€…ä¿®æ”¹è„šæœ¬ä¸­çš„ `findChrome()` å‡½æ•°ï¼Œæ·»åŠ ä½ çš„ Chrome è·¯å¾„

### é—®é¢˜ 2: æ— æ³•è®¿é—®å¾®åš

**é”™è¯¯ä¿¡æ¯**: è¶…æ—¶æˆ–ç½‘ç»œé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ­£å¸¸è®¿é—® weibo.com
3. å¯èƒ½éœ€è¦ç™»å½•å¾®åšè´¦å·ï¼ˆæ‰‹åŠ¨ç™»å½•åå†è¿è¡Œè„šæœ¬ï¼‰

### é—®é¢˜ 3: æå–ä¸åˆ°æ•°æ®

**ç°è±¡**: PDF ä¸­æ˜¾ç¤º"æœªè·å–åˆ°æ•°æ®"

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹ç”Ÿæˆçš„æˆªå›¾æ–‡ä»¶ï¼Œç¡®è®¤é¡µé¢å†…å®¹
2. å¾®åšé¡µé¢ç»“æ„å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦æ›´æ–°é€‰æ‹©å™¨
3. å°è¯•å¢åŠ ç­‰å¾…æ—¶é—´ï¼š`await page.waitForTimeout(10000);`

### é—®é¢˜ 4: ä¾èµ–å®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
PUPPETEER_SKIP_DOWNLOAD=true npm install
```

## ğŸ“Š æ•°æ®æ ¼å¼è¯´æ˜

### JSON æ•°æ®ç»“æ„

```json
[
  {
    "rank": "1",           // æ’å
    "title": "çƒ­æœæ ‡é¢˜",    // çƒ­æœå†…å®¹
    "heat": "1234567",     // çƒ­åº¦æ•°å€¼
    "tag": "çƒ­"            // æ ‡ç­¾ï¼ˆçƒ­/æ–°/èç­‰ï¼‰
  }
]
```

## ğŸ” æ³¨æ„äº‹é¡¹

1. **é¢‘ç‡æ§åˆ¶**: ä¸è¦è¿‡äºé¢‘ç¹åœ°æŠ“å–ï¼Œå»ºè®®é—´éš”è‡³å°‘ 30 åˆ†é’Ÿ
2. **åˆæ³•ä½¿ç”¨**: ä»…ç”¨äºä¸ªäººå­¦ä¹ å’Œç ”ç©¶ï¼Œä¸å¯ç”¨äºå•†ä¸šç”¨é€”
3. **åçˆ¬è™«**: å¾®åšæœ‰åçˆ¬è™«æœºåˆ¶ï¼Œå¯èƒ½éœ€è¦äººå·¥éªŒè¯
4. **æ•°æ®å‡†ç¡®æ€§**: è„šæœ¬ä¼šå°½åŠ›æå–æ•°æ®ï¼Œä½†ä¸ä¿è¯ 100% å‡†ç¡®

## ğŸ“ˆ é«˜çº§åŠŸèƒ½

### 1. æ— å¤´æ¨¡å¼è¿è¡Œ

é€‚åˆæœåŠ¡å™¨æˆ–å®šæ—¶ä»»åŠ¡ï¼š

```javascript
headless: true  // åœ¨ launch é…ç½®ä¸­ä¿®æ”¹
```

### 2. è‡ªå®šä¹‰ç­‰å¾…æ—¶é—´

å¦‚æœç½‘ç»œè¾ƒæ…¢ï¼Œå¯ä»¥å¢åŠ ç­‰å¾…æ—¶é—´ï¼š

```javascript
await page.waitForTimeout(10000);  // ç­‰å¾… 10 ç§’
```

### 3. æ·»åŠ ä»£ç†

```javascript
const browser = await puppeteer.launch({
    args: ['--proxy-server=http://your-proxy:8080']
});
```

### 4. å±å¹•æˆªå›¾è°ƒè¯•

```javascript
await page.screenshot({
    path: 'debug.png',
    fullPage: true
});
```

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ç”Ÿæˆçš„æˆªå›¾æ–‡ä»¶
3. æŸ¥çœ‹ JSON æ–‡ä»¶ç¡®è®¤æ•°æ®æ˜¯å¦æå–æˆåŠŸ
4. å°è¯•æ‰‹åŠ¨è®¿é—®å¾®åšç½‘ç«™ç¡®è®¤é¡µé¢ç»“æ„

## ğŸ“ æ›´æ–°æ—¥å¿—

- **v1.0.0** (2026-01-24)
  - âœ… åˆå§‹ç‰ˆæœ¬
  - âœ… æ”¯æŒè‡ªåŠ¨æ‰“å¼€å¾®åš
  - âœ… æ”¯æŒçƒ­æœåˆ—è¡¨æå–
  - âœ… ç”Ÿæˆ PDF å’Œ JSON æ–‡ä»¶
  - âœ… å¤šç§é€‰æ‹©å™¨è‡ªåŠ¨é€‚é…
  - âœ… ä½¿ç”¨ç³»ç»Ÿ Chrome æµè§ˆå™¨

## ğŸ“„ è®¸å¯è¯

MIT License - å¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹
